<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="login.css">
</head>
<body>

    <header>
        <h1><a id="homeLink">Life Sync</a></h1>
    </header>
    
    <main>
        <h1>Login</h1>
        <h3>Insira os dados abaixo</h3>

        <form action="#" id="loginForm" autocomplete="off" method="post">
            <p><label for="email">E-Mail </label><input type="email" name="Email" id="email" placeholder="E-Mail" required minlength="5" maxlength="50" size="25"></p>
            <p><label for="senha">Senha </label><input type="password" name="Senha" id="senha" placeholder="Senha" required minlength="5" maxlength="50" size="25"></p>
            <p><button type="submit">Entrar</button></p>
        </form>
    </main>

    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>

    <script>
        // Inicialize o Firebase com sua configuração
        var firebaseConfig = {
            apiKey: "AIzaSyBKEbvSnm0uEXBoO9EXphaIDd4muen9ZNU",
            authDomain: "lifesync-581d7.firebaseapp.com",
            databaseURL: "https://lifesync-581d7-default-rtdb.firebaseio.com",
            projectId: "lifesync-581d7",
            storageBucket: "lifesync-581d7.appspot.com",
            messagingSenderId: "910441512297",
            appId: "1:910441512297:web:d193f0df19aef739d791f8"
        };
        firebase.initializeApp(firebaseConfig);

        // Adicione um evento de "submit" ao formulário para login de usuário
        document.getElementById("loginForm").addEventListener("submit", function(event) {
            event.preventDefault(); // Evita o envio padrão do formulário

            // Obtenha os valores dos campos de entrada
            var email = document.getElementById("email").value;
            var senha = document.getElementById("senha").value;

            // Autenticar usuário com email e senha
            firebase.auth().signInWithEmailAndPassword(email, senha)
                .then(function(userCredential) {
                    // Login bem-sucedido
                    alert("Login bem-sucedido!");

                    // Redirecionar para a página inicial (substitua "index.html" pelo nome da sua página inicial)
                    window.location.href = "index.html";
                })
                .catch(function(error) {
                    // Trate erros de login
                    var errorMessage = error.message;
                    alert("Erro ao fazer login: " + errorMessage);
                });
        });

        // Verifique se o usuário está logado
        firebase.auth().onAuthStateChanged(function(user) {
            if (user) {
                // Usuário logado
                window.location.href = "index.html";
            }
        });

        // Adicione um evento de clique ao h1 "Life Sync"
        document.getElementById("homeLink").addEventListener("click", function () {
            window.location.href = "index.html";
        });
    </script>
</body>
</html>
