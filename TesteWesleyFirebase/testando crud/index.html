<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste de Firebase</title>
    <!-- Inclua o SDK do Firebase -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script>
        // Configurações do seu projeto Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyBKEbvSnm0uEXBoO9EXphaIDd4muen9ZNU",
            authDomain: "lifesync-581d7.firebaseapp.com",
            projectId: "lifesync-581d7",
            storageBucket: "lifesync-581d7.appspot.com",
            messagingSenderId: "910441512297",
            appId: "1:910441512297:web:d193f0df19aef739d791f8"
        };

        // Inicializando o Firebase com as configurações
        firebase.initializeApp(firebaseConfig);

        // Referência para o banco de dados e autenticação
        const database = firebase.database();
        const auth = firebase.auth();

        // Função para login do usuário (Exemplo com e-mail e senha)
        function login(email, password) {
            auth.signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    const user = userCredential.user;
                    const userName = "Marco";
                    console.log("Usuário logado:", user.uid);
                    adicionarDados(user.uid, userName); // Passa o nome do usuário
                })
                .catch((error) => {
                    console.error("Erro ao logar:", error);
                });
        }

        // Adicionando dados de exemplo ao banco de dados
        function adicionarDados(uid, userName) {
            const usuarioRef = database.ref('usuarios/' + uid);

            // Adiciona o nome do usuário
            usuarioRef.set({
                nome: userName
            });

            const tarefa1ID = usuarioRef.child('tarefas').push().key;
            const tarefa1Data = {
                nomeTarefa: "Tarefa 1",
                tempoInicial: firebase.database.ServerValue.TIMESTAMP,
                tempoFinal: firebase.database.ServerValue.TIMESTAMP,
                pomodoroConcluido: 2,
                evento: "2024-05-30",
                prioridade: "red",
                estadoAtual: "ativo"
            };

            const tarefa2ID = usuarioRef.child('tarefas').push().key;
            const tarefa2Data = {
                nomeTarefa: "Tarefa 2",
                tempoInicial: firebase.database.ServerValue.TIMESTAMP,
                tempoFinal: firebase.database.ServerValue.TIMESTAMP,
                pomodoroConcluido: 3,
                evento: "2024-05-16",
                prioridade: "blue",
                estadoAtual: "historico"
            };

            const tarefa3ID = usuarioRef.child('historico').push().key;
            const tarefa3Data = {
                nomeTarefa: "Tarefa 3",
                tempoInicial: firebase.database.ServerValue.TIMESTAMP,
                tempoFinal: firebase.database.ServerValue.TIMESTAMP,
                pomodoroConcluido: 1,
                evento: "2024-05-10",
                prioridade: "green",
                estadoAtual: "historico"
            };

            const tarefa4ID = usuarioRef.child('historico').push().key;
            const tarefa4Data = {
                nomeTarefa: "Tarefa 4",
                tempoInicial: firebase.database.ServerValue.TIMESTAMP,
                tempoFinal: firebase.database.ServerValue.TIMESTAMP,
                pomodoroConcluido: 4,
                evento: "2024-04-25",
                prioridade: "yellow",
                estadoAtual: "historico"
            };

            const tarefa5ID = usuarioRef.child('historico').push().key;
            const tarefa5Data = {
                nomeTarefa: "Tarefa 5",
                tempoInicial: firebase.database.ServerValue.TIMESTAMP,
                tempoFinal: firebase.database.ServerValue.TIMESTAMP,
                pomodoroConcluido: 2,
                evento: "2024-04-10",
                prioridade: "orange",
                estadoAtual: "historico"
            };

            usuarioRef.child('tarefas/' + tarefa1ID).set(tarefa1Data);
            usuarioRef.child('tarefas/' + tarefa2ID).set(tarefa2Data);
            usuarioRef.child('historico/' + tarefa3ID).set(tarefa3Data);
            usuarioRef.child('historico/' + tarefa4ID).set(tarefa4Data);
            usuarioRef.child('historico/' + tarefa5ID).set(tarefa5Data)
                .then(() => {
                    console.log("Dados adicionados com sucesso!");
                })
                .catch((error) => {
                    console.error("Erro ao adicionar dados:", error);
                });
        }

        // Testando a adição de dados após login
        document.addEventListener('DOMContentLoaded', () => {
            // Exemplo de login - substituir pelos dados reais do usuário
            const email = "marco@marco.com";
            const password = "123456789";
            login(email, password);
        });

    </script>
</head>

<body>
    <!-- O corpo da sua página HTML -->
    <h1>Teste de Firebase</h1>
    <p>Este é um exemplo simples de como usar o Firebase em um arquivo HTML local.</p>
</body>

</html>
