<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minha Agenda</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Agenda de Tarefas -->
    <div class="agenda">
        <h2>Agenda de Tarefas</h2>
        <input type="text" id="taskInput" placeholder="Adicionar nova tarefa">
        <input type="date" id="taskDate">
        <button onclick="addTask()">Adicionar Tarefa</button>
        <ul id="taskList"></ul>
    </div>

    <!-- Calendário -->
    <div class="calendario">
        <h2>Calendário</h2>
        <div>
            <button onclick="previousMonth()">Anterior</button>
            <span id="currentMonthYear">Abril 2024</span>
            <button onclick="nextMonth()">Próximo</button>
        </div>
        <table>
            <thead>
                <tr>
                    <th>Domingo</th>
                    <th>Segunda</th>
                    <th>Terça</th>
                    <th>Quarta</th>
                    <th>Quinta</th>
                    <th>Sexta</th>
                    <th>Sábado</th>
                </tr>
            </thead>
            <tbody id="calendarBody">
                <!-- Os dias do mês serão inseridos aqui com JavaScript -->
            </tbody>
        </table>
    </div>
    <script>
        // Lógica JavaScript para a funcionalidade do site

        // Agenda de Tarefas
        function addTask() {
            var taskInput = document.getElementById("taskInput");
            var taskDate = document.getElementById("taskDate").value;
            var taskList = document.getElementById("taskList");
            var task = taskInput.value;
            if (task.trim() !== "" && taskDate.trim() !== "") {
                var li = document.createElement("li");
                li.textContent = task + " - " + taskDate;
                taskList.appendChild(li);
                taskInput.value = "";
                taskDate.value = "";

                // Atualiza o calendário após adicionar a tarefa
                generateCalendar(); // Esta linha atualiza o calendário

            } else {
                alert("Por favor, insira uma tarefa válida e selecione uma data.");
            }
        }

        let timerInterval; // Variável para armazenar o intervalo do temporizador

        function startPomodoro() {
            document.getElementById("startButton").style.display = "none"; // Ocultar botão Iniciar
            document.getElementById("stopButton").style.display = "inline-block"; // Exibir botão Parar

            let pomodoroTimer = document.getElementById("pomodoroTimer");
            let minutes = 25;
            let seconds = 0;

            // Inicializar o temporizador apenas se não estiver em execução
            if (!timerInterval) {
                timerInterval = setInterval(function() {
                    if (seconds === 0) {
                        if (minutes === 0) {
                            clearInterval(timerInterval);
                            timerInterval = null; // Limpar o intervalo
                            alert("Pomodoro concluído!");
                            document.getElementById("startButton").style.display = "inline-block"; // Exibir botão Iniciar
                            document.getElementById("stopButton").style.display = "none"; // Ocultar botão Parar
                        } else {
                            minutes--;
                            seconds = 59;
                        }
                    } else {
                        seconds--;
                    }
                    pomodoroTimer.textContent = (minutes < 10 ? "0" + minutes : minutes) + ":" + (seconds < 10 ? "0" + seconds : seconds);
                }, 1000);
            }
        }

        function stopPomodoro() {
            clearInterval(timerInterval); // Parar o temporizador
            timerInterval = null; // Limpar o intervalo
            document.getElementById("startButton").style.display = "inline-block"; // Exibir botão Iniciar
            document.getElementById("stopButton").style.display = "none"; // Ocultar botão Parar
            document.getElementById("pomodoroTimer").textContent = "25:00"; // Redefinir o temporizador para o valor padrão
        }

        // Calendário
        // Você pode usar bibliotecas como FullCalendar para implementar o calendário, mas para este exemplo, deixarei como exercício adicional.
        // Adicione este código ao final do seu arquivo script.js

        let currentMonth = 3; // Janeiro é 0, Fevereiro é 1, ..., Dezembro é 11
        let currentYear = 2024;
        const months = [
            "Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho",
            "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"
        ];

        function generateCalendar() {
            const calendarBody = document.getElementById("calendarBody");
            const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
            const firstDayOfMonth = new Date(currentYear, currentMonth, 1).getDay();

            calendarBody.innerHTML = "";

            let date = 1;
            for (let i = 0; i < 6; i++) {
                const row = document.createElement("tr");

                for (let j = 0; j < 7; j++) {
                    const cell = document.createElement("td");

                    if (i === 0 && j < firstDayOfMonth) {
                        const cellText = document.createTextNode("");
                        cell.appendChild(cellText);
                    } else if (date > daysInMonth) {
                        break;
                    } else {
                        const cellText = document.createTextNode(date);

                        if (date === new Date().getDate() && currentMonth === new Date().getMonth() && currentYear === new Date().getFullYear()) {
                            cell.classList.add("today");
                        }

                        cell.appendChild(cellText);
                        cell.dataset.date = `${currentYear}-${currentMonth + 1}-${date}`;
                        cell.addEventListener("click", function() {
                            document.getElementById("taskDate").value = this.dataset.date;
                        });
                        // Verifica se existe uma tarefa para este dia
                        const taskExists = checkTaskExists(`${currentYear}-${currentMonth + 1}-${date}`);
                        if (taskExists) {
                            const taskIndicator = document.createElement("span");
                            taskIndicator.className = "task-indicator";
                            cell.appendChild(taskIndicator);
                        }
                        date++;
                    }

                    row.appendChild(cell);
                }

                calendarBody.appendChild(row);

                if (date > daysInMonth) {
                    break;
                }
            }

            document.getElementById("currentMonthYear").textContent = `${months[currentMonth]} ${currentYear}`;
        }

        function previousMonth() {
            if (currentMonth === 0) {
                currentMonth = 11;
                currentYear--;
            } else {
                currentMonth--;
            }

            generateCalendar();
        }

        function nextMonth() {
            if (currentMonth === 11) {
                currentMonth = 0;
                currentYear++;
            } else {
                currentMonth++;
            }

            generateCalendar();
        }

        // Verifica se existe uma tarefa para o dia especificado
        function checkTaskExists(date) {
            var taskList = document.getElementById("taskList");
            var tasks = taskList.getElementsByTagName("li");
            for (var i = 0; i < tasks.length; i++) {
                if (tasks[i].textContent.includes(date)) {
                    return true;
                }
            }
            return false;
        }

        // Gerar o calendário inicial
        generateCalendar();
    </script>
</body>
</html>

