<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pomodoro com Lista de Tarefas</title>
    <link rel="stylesheet" href="pomodoro.css">
</head>
<body>
    <main>
        <h1>Pomodoro com Lista de Tarefas</h1>
        <input type="text" id="task" placeholder="Nova tarefa">
        <button id="addTask">Adicionar Tarefa</button>
        <ul id="taskList"></ul>
    </main>

    <script>
        const taskInput = document.getElementById('task');
        const addTaskButton = document.getElementById('addTask');
        const taskList = document.getElementById('taskList');

        addTaskButton.addEventListener('click', () => {
            const task = taskInput.value.trim();
            if (task) {
                const li = document.createElement('li');
                li.textContent = task;

                const pomodoroDiv = document.createElement('div');
                pomodoroDiv.className = 'pomodoro';

                const minutesDisplay = document.createElement('span');
                minutesDisplay.className = 'minutes';
                minutesDisplay.textContent = '25';

                const colon = document.createElement('span');
                colon.textContent = ':';

                const secondsDisplay = document.createElement('span');
                secondsDisplay.className = 'seconds';
                secondsDisplay.textContent = '00';

                const startButton = document.createElement('button');
                startButton.textContent = 'Iniciar';
                const pauseButton = document.createElement('button');
                pauseButton.textContent = 'Pausar';
                const resetButton = document.createElement('button');
                resetButton.textContent = 'Resetar';

                pomodoroDiv.appendChild(minutesDisplay);
                pomodoroDiv.appendChild(colon);
                pomodoroDiv.appendChild(secondsDisplay);
                pomodoroDiv.appendChild(startButton);
                pomodoroDiv.appendChild(pauseButton);
                pomodoroDiv.appendChild(resetButton);

                li.appendChild(pomodoroDiv);

                const completeButton = document.createElement('button');
                completeButton.textContent = 'Concluir';
                completeButton.className = 'complete-btn';
                completeButton.addEventListener('click', () => {
                    li.classList.toggle('done');
                    if (li.classList.contains('done')) {
                        const deleteButton = document.createElement('button');
                        deleteButton.textContent = 'Excluir';
                        deleteButton.className = 'delete-btn';
                        deleteButton.addEventListener('click', () => {
                            taskList.removeChild(li);
                        });
                        li.appendChild(deleteButton);
                    } else {
                        const deleteButton = li.querySelector('.delete-btn');
                        if (deleteButton) {
                            li.removeChild(deleteButton);
                        }
                    }
                });

                li.appendChild(completeButton);
                taskList.appendChild(li);
                taskInput.value = '';

                let minutes = 25;
                let seconds = 0;
                let interval;
                let isPaused = false;

                function updateDisplay() {
                    minutesDisplay.textContent = String(minutes).padStart(2, '0');
                    secondsDisplay.textContent = String(seconds).padStart(2, '0');
                }

                function startTimer() {
                    if (interval) clearInterval(interval);
                    interval = setInterval(() => {
                        if (!isPaused) {
                            if (seconds === 0) {
                                if (minutes === 0) {
                                    clearInterval(interval);
                                    alert("Tempo esgotado!");
                                } else {
                                    minutes--;
                                    seconds = 59;
                                }
                            } else {
                                seconds--;
                            }
                            updateDisplay();
                        }
                    }, 1000);
                }

                startButton.addEventListener('click', () => {
                    isPaused = false;
                    startTimer();
                });

                pauseButton.addEventListener('click', () => {
                    isPaused = true;
                });

                resetButton.addEventListener('click', () => {
                    clearInterval(interval);
                    minutes = 25;
                    seconds = 0;
                    isPaused = false;
                    updateDisplay();
                });

                updateDisplay();
            }
        });
    </script>
</body>
</html>
